<!DOCTYPE html>
<html lang="en" class="md-surface">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Events Management{% endblock %}</title>
    
    <!-- Material Design Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    
    <!-- Tailwind CSS (for utility classes) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Material Design CSS -->
    <link rel="stylesheet" href="{% load static %}{% static 'css/material_design.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="md-surface min-h-screen">
    <!-- Top App Bar -->
    <header class="md-top-app-bar sticky top-0 z-50">
        <div class="flex items-center justify-between px-4 py-3">
            <div class="flex items-center">
                <button class="md-icon-button mr-3 lg:hidden" onclick="toggleDrawer()">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <h1 class="md-title-large text-on-surface">
                    {% block page_title %}Events Management{% endblock %}
                </h1>
            </div>
            <div class="flex items-center space-x-2">
                <button class="md-icon-button" onclick="toggleTheme()">
                    <span class="material-symbols-outlined">light_mode</span>
                </button>
                <button class="md-icon-button">
                    <span class="material-symbols-outlined">notifications</span>
                </button>
                <button class="md-icon-button">
                    <span class="material-symbols-outlined">account_circle</span>
                </button>
            </div>
        </div>
    </header>

    <div class="flex min-h-screen">
        <!-- Navigation Drawer -->
        <nav id="nav-drawer" class="md-navigation-drawer hidden lg:block md-animate-slide-in-left">
            <div class="p-4">
                <div class="mb-6">
                    <h2 class="md-title-medium text-on-surface mb-2">Navigation</h2>
                </div>
                <ul class="space-y-2">
                    <li>
                        <a href="{% url 'events:index' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                            <span class="material-symbols-outlined mr-3">dashboard</span>
                            <span class="md-body-medium">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'events:pledge_list' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                            <span class="material-symbols-outlined mr-3">volunteer_activism</span>
                            <span class="md-body-medium">Pledges</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'events:transaction_list' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                            <span class="material-symbols-outlined mr-3">payments</span>
                            <span class="md-body-medium">Transactions</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'events:message_list' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                            <span class="material-symbols-outlined mr-3">email</span>
                            <span class="md-body-medium">Messages</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'events:bulk_reminder_send' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                            <span class="material-symbols-outlined mr-3">broadcast_on_personal</span>
                            <span class="md-body-medium">Bulk Reminders</span>
                        </a>
                    </li>
                </ul>
                
                <!-- Account Section -->
                <div class="mt-8 pt-6 border-t border-outline-variant">
                    <h3 class="md-title-small text-on-surface mb-3">Account</h3>
                    <ul class="space-y-1">
                        <li>
                            <a href="{% url 'events:logout' %}" class="flex items-center p-3 rounded-lg hover:bg-surface-container-high transition-colors">
                                <span class="material-symbols-outlined mr-3">logout</span>
                                <span class="md-body-medium">Logout</span>
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'events:delete_account' %}" class="flex items-center p-3 rounded-lg hover:bg-error-container text-error transition-colors">
                                <span class="material-symbols-outlined mr-3">delete_forever</span>
                                <span class="md-body-medium">Delete Account</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 md-surface-container-low">
            <!-- Content Area -->
            <div class="p-6">
                <!-- Breadcrumb -->
                {% block breadcrumb %}
                <nav class="mb-6">
                    <ol class="flex items-center space-x-2 md-body-small text-on-surface-variant">
                        <li><a href="/" class="hover:text-primary">Home</a></li>
                        <li><span class="material-symbols-outlined text-sm">chevron_right</span></li>
                        <li class="text-on-surface">{% block breadcrumb_active %}Current Page{% endblock %}</li>
                    </ol>
                </nav>
                {% endblock %}

                <!-- Page Header -->
                {% block page_header %}
                <div class="mb-6">
                    <h2 class="md-headline-medium text-on-surface mb-2">
                        {% block content_title %}Page Title{% endblock %}
                    </h2>
                    {% block content_subtitle %}
                    <p class="md-body-medium text-on-surface-variant">
                        Page description goes here
                    </p>
                    {% endblock %}
                </div>
                {% endblock %}

                <!-- Messages/Alerts -->
                {% if messages %}
                <div class="mb-6 space-y-3">
                    {% for message in messages %}
                    <div class="md-snackbar md-animate-fade-in flex items-center justify-between p-4 rounded-lg
                        {% if message.tags == 'error' %}bg-error-container text-on-error-container
                        {% elif message.tags == 'warning' %}bg-surface-container-high text-warning
                        {% elif message.tags == 'success' %}bg-surface-container-high text-success
                        {% else %}bg-surface-container-high text-on-surface{% endif %}">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined mr-2">
                                {% if message.tags == 'error' %}error
                                {% elif message.tags == 'warning' %}warning
                                {% elif message.tags == 'success' %}check_circle
                                {% else %}info{% endif %}
                            </span>
                            {{ message }}
                        </div>
                        <button class="md-icon-button ml-4" onclick="this.parentElement.remove()">
                            <span class="material-symbols-outlined">close</span>
                        </button>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Main Content Block -->
                {% block content %}
                <div class="md-card p-6">
                    <p class="md-body-medium text-on-surface-variant">Content goes here</p>
                </div>
                {% endblock %}
            </div>
        </main>
    </div>

    <!-- FAB (Floating Action Button) -->
    {% block fab %}
    <button class="md-fab fixed bottom-6 right-6 md-elevation-3" onclick="openCreateModal()">
        <span class="material-symbols-outlined">add</span>
    </button>
    {% endblock %}

    <!-- Modal Container -->
    <div id="modal-container" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="md-dialog max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden">
            <div id="modal-content">
                <!-- Modal content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Navigation drawer toggle
        function toggleDrawer() {
            const drawer = document.getElementById('nav-drawer');
            drawer.classList.toggle('hidden');
        }

        // Theme toggle
        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
        }

        // Modal functions
        function openModal(content) {
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('modal-container').classList.remove('hidden');
            document.getElementById('modal-container').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal-container').classList.add('hidden');
            document.getElementById('modal-container').classList.remove('flex');
        }

        // Close modal on outside click
        document.getElementById('modal-container').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        // Ripple effect for buttons
        document.addEventListener('click', function(e) {
            if (e.target.closest('.md-ripple')) {
                const button = e.target.closest('.md-ripple');
                const rect = button.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                const ripple = document.createElement('div');
                ripple.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    left: ${x}px;
                    top: ${y}px;
                    background: rgba(255, 255, 255, 0.3);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: ripple 0.6s ease-out;
                    pointer-events: none;
                `;
                
                button.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            }
        });

        // Add ripple animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to { transform: scale(2); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
